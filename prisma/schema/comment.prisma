// Comments (polymorphic)
model Comment {
  id              String   @id @default(uuid())
  commentText     String
  userId          String
  postId          String?
  pagePostId      String?
  parentCommentId String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  post          Post?     @relation("PostComments", fields: [postId], references: [id], onDelete: Cascade)
  page_Post     PagePost? @relation(fields: [pagePostId], references: [id], onDelete: Cascade)
  parentComment Comment?  @relation("CommentParent", fields: [parentCommentId], references: [id])
  childComments Comment[] @relation("CommentParent")
  mentions      Mention[] @relation("CommentMentions")

  @@index([postId, createdAt])
  @@index([userId])
  @@index([parentCommentId])
}
