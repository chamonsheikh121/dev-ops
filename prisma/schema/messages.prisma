
// Messages
model Message {
  id               String    @id @default(uuid())
  content          String?
  senderId         String
  receiverId       String
  replyToMessageId String?
  isRead           Boolean   @default(false)
  createdAt        DateTime  @default(now())

  sender           User      @relation("SenderMessages", fields: [senderId], references: [id], onDelete: Cascade)
  receiver         User      @relation("ReceiverMessages", fields: [receiverId], references: [id], onDelete: Cascade)
  replyToMessage   Message?  @relation("ReplyMessages", fields: [replyToMessageId], references: [id])
  replies          Message[] @relation("ReplyMessages")
  media            Media[]

  @@index([senderId, receiverId, createdAt])
  @@index([receiverId, createdAt])
}