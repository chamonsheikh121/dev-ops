

model User {
  id            String     @id @default(uuid())
  username      String     @unique
  email         String     @unique
  phone         String?    @unique
  passwordHash  String
  fullName      String?
  bio           String?
  avatarUrl     String?
  coverPhotoUrl String?
  location      String?
  role          UserRoles  @default(USER)
  isVerified    Boolean    @default(false)
  isDeleted     Boolean    @default(false) // ← added
  isBlocked     Boolean    @default(false) // ← added (admin block flag)
  status        UserStatus @default(ACTIVE) // ← added
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  // Relations (unchanged)
  refreshTokens        RefreshToken[]
  socialLinks          UserSocialLink[]
  posts                Post[]
  comments             Comment[]
  likes                Like[]
  bookmarks            Bookmark[]
  followers            Follow[]         @relation("FollowingRelation")
  following            Follow[]         @relation("FollowerRelation")
  blockedUsers         BlockUser[]      @relation("BlockerRelation")
  blockedByUsers       BlockUser[]      @relation("BlockedRelation")
  messagesSent         Message[]        @relation("SenderMessages")
  messagesReceived     Message[]        @relation("ReceiverMessages")
  notifications        Notification[]   @relation("UserNotifications")
  notificationsAsActor Notification[]
  pagesOwned           Page[]
  pageAdmins           PageAdmin[]
  pageFollowers        PageFollower[]
  pageInvitationsSent  PageInvitation[] @relation("PageInviteSender")
  pageInvitationsReceived  PageInvitation[] @relation("PageInviteReceiver")
  pagePosts            PagePost[]
  userSettings         UserSettings?
  interests            UserInterest[]
  mentionsReceived     Mention[]        @relation("MentionedUser")
  mentionsGiven        Mention[]        @relation("Mentioner")

  @@index([username])
  @@index([email])
  @@index([id])
}

enum UserRoles {
  USER
  ADMIN
}

enum UserStatus {
  ACTIVE
  DEACTIVATED
  SUSPENDED
}
